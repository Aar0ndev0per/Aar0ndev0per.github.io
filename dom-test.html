<html>
<head>
	<title>DOM Test</title>
	<script type="text/javascript">
		function makediv(){
			var myContainer=document.createElement("div"); //create a container
			myContainer.setAttribute("id","container"); //set attributes for myContainer
			myContainer.setAttribute("style","width:100%; height:100%; border:1px solid; background:linear-gradient(180deg, #f8b196, #F67280, #C06C84, #6C5B7B, #355C7D); overflow:hidden");
			//append myDIV to myContainer
			var myDIV=document.createElement("div"); 
			//set id for myDIV
			myDIV.id="round-box";
			//set style attributes for myDIV
			myDIV.setAttribute("style","border:1px solid rgb(43, 192, 212); width:50px; height:50px; margin:5px 5px 5px 5px; border-radius:50%; background-color:#000; position:relative; float:left;")
			//change backgroundColor of round-box
			myDIV.style.backgroundColor=getRandomColor();
			//append myDIV to myContainer
			myContainer.appendChild(myDIV);
			//append myContainer to document
			document.body.appendChild(myContainer);
			var smallBox=document.querySelector("#round-box");
			//get offsetWidth for myContainer
			var myContainerWidth=Math.floor(smallBox.parentNode.offsetWidth/smallBox.offsetWidth);
			//get offsetHeight for myContainer
			var myContainerHeight=Math.floor(smallBox.parentNode.offsetHeight/smallBox.offsetHeight);
			//get number of round-box to be created
			var roundBoxCount=myContainerWidth*myContainerHeight;
			//function for adding round-box to myContainer
			//function addDIV(){
				if (document.querySelector("#container").innerHTML!='') { //if the screen is not clear
					document.querySelector("#container").innerHTML=='';  // make it clear
				};
				//document.body.appendChild(myDIV);
				var i=0;
				for (var i=1;i<=roundBoxCount-1;i++){
				smallBox.parentNode.appendChild(smallBox.cloneNode(true))
				}
				changeColor();
			//}; 
			//function for removing all the round-box from myContainer
			/*function removeDIV(){
				if (document.body.innerHTML!=''){
					document.body.innerHTML=''
					};
			}*/
			
		}
		/*function getRandomColor() {
		  var letters = '0123456789ABCDEF';
		  var color = '#';
		  for (var i = 0; i < 6; i++) {
			color += letters[Math.floor(Math.random() * 16)];
		  }
		  return color;
		}*/
		Arr=[]; 
		function getRandomColor(){
			color="";
			while(!color){
				var letters = '0123456789ABCDEF';
				var color = '#';
				for (var i = 0; i < 6; i++) {
					color += letters[Math.floor(Math.random() * 16)];
				}
				for (var i of Arr){
					if(i==undefined||i==color){
						color="";
					}
				}
			}
			if(color!==""){
			Arr.push(color);
			return color;
			}
		}
			
		function changeColor(){
			Arr=[];
			var smallBoxArr=Array.prototype.slice.call(document.querySelector("#container").childNodes, 0)
			for(var i=0;i<smallBoxArr.length;i++){
				smallBoxArr[i].style.backgroundColor=getRandomColor();
			}
		}
	</script>
</head>
<body onload="makediv()">
	<button id="add-div" onclick="changeColor()">change colors</button>
</body>
</html>